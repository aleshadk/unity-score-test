<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Unity WebGL Player | New Unity Project</title>
  <link rel="shortcut icon" href="TemplateData/favicon.ico">
  <link rel="stylesheet" href="TemplateData/style.css">
  <script src="TemplateData/UnityProgress.js"></script>
  <script src="Build/UnityLoader.js"></script>
  <script src="https://unpkg.com/penpal/dist/penpal.min.js"></script>
  <script>
    var connection;

    window.addEventListener("message", message => {
      console.log('получено', message);
      window.parent.postMessage("RECEIVED FROM PAREND " + JSON.stringify(message), "*");
    });

    setTimeout(function () {
      connection = Penpal.connectToParent({
        // Methods child is exposing to parent
        methods: {
          init: function (params) {
            console.log('init', params);
          },
          dataRestored: function (params) {
            console.log('dataRestored', params);
          },
          setSessionId: function (params) {
            console.log('setSessionId', params);
          },
          setRoomHash: function (params) {
            console.log('setRoomHash', params);
          },
          userInfoUpdated: function (params) {
            console.log('userInfoUpdated', params);
          },
        }
      });
    }, 10000);





    window.setSkysmartScore = function (score, completness) {
      window.parent.postMessage("mogsidr", "*");

      connection.promise.then((parent) => {
        console.log(parent);
        parent.setScore(score, completness);
      });
    }
  </script>
  <script>
    var unityInstance = UnityLoader.instantiate("unityContainer", "Build/now10.json", { onProgress: UnityProgress });
  </script>
</head>

<body>
  <div class="webgl-content">
    <div id="unityContainer" style="width: 960px; height: 600px"></div>
    <div class="footer">
      <div class="webgl-logo"></div>
      <div class="fullscreen" onclick="unityInstance.SetFullscreen(1)"></div>
      <div class="title">New Unity Project</div>
    </div>
  </div>
</body>

</html>